<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permutation & Combination Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #10b981;
            --danger-color: #ef4444;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1.5rem;
        }

        .animate-pop-in {
            animation: popIn 0.5s ease-out;
        }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .radio-label {
            transition: all 0.2s ease;
        }

        .custom-radio input[type="radio"]:checked+.radio-label {
            border-color: var(--primary-color);
            background-color: #eff6ff;
            color: var(--primary-color);
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            transform: scale(1.02);
        }

        .custom-radio input[type="radio"]:checked+.radio-label svg {
            color: var(--primary-color);
        }
    </style>
</head>

<body>

    <main class="w-full max-w-lg">
        <h1 class="text-3xl sm:text-4xl font-bold text-center text-gray-800 mb-6 animate-pop-in">
            Permutation & Combination
        </h1>

        <!-- Result Box -->
        <div id="resultBox"
            class="bg-white p-4 sm:p-6 mb-8 rounded-xl shadow-lg border-2 border-blue-100 animate-pop-in transition duration-300">
            <p class="text-gray-500 font-medium text-sm mb-1">Result</p>
            <span id="result"
                class="text-2xl sm:text-3xl font-extrabold text-blue-600 transition duration-300">---</span>
        </div>

        <!-- Calculator Card -->
        <div class="bg-white p-6 sm:p-8 rounded-xl shadow-2xl w-full border border-gray-100">
            <form onsubmit="handleSubmit(event)" class="space-y-6">
                <!-- Input N -->
                <div>
                    <label for="inputN" class="block text-sm font-semibold text-gray-700 mb-1">Set Size (N)</label>
                    <input id="inputN" type="number" placeholder="Total number of items (N)" min="0"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150"
                        required>
                </div>

                <!-- Input R -->
                <div>
                    <label for="inputR" class="block text-sm font-semibold text-gray-700 mb-1">Subset Size (R)</label>
                    <input id="inputR" type="number" placeholder="Number of items to choose (R)" min="0"
                        class="w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150"
                        required>
                </div>

                <!-- Radio Group -->
                <div class="space-y-3">
                    <p class="text-sm font-semibold text-gray-700">Choose Operation:</p>
                    <div class="grid grid-cols-2 gap-4 custom-radio">
                        <!-- Permutation -->
                        <label class="block">
                            <input value="perm" type="radio" name="op" class="hidden">
                            <div
                                class="radio-label flex items-center justify-center p-3 rounded-xl border-2 border-gray-200 cursor-pointer hover:border-blue-300 transition duration-150 text-gray-600 font-medium">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400"
                                    viewBox="0 0 20 20" fill="currentColor">
                                    <path
                                        d="M10 2a8 8 0 100 16 8 8 0 000-16zm-4.707 9.293a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L10 9.414l-2.293 2.293a1 1 0 01-1.414 0z"
                                        clip-rule="evenodd" fill-rule="evenodd"></path>
                                </svg>
                                Permutation
                            </div>
                        </label>

                        <!-- Combination -->
                        <label class="block">
                            <input value="comb" type="radio" name="op" class="hidden">
                            <div
                                class="radio-label flex items-center justify-center p-3 rounded-xl border-2 border-gray-200 cursor-pointer hover:border-blue-300 transition duration-150 text-gray-600 font-medium">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-gray-400"
                                    viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd"
                                        d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 011-1h4a1 1 0 110 2H8a1 1 0 01-1-1zm3 4a1 1 0 100 2h4a1 1 0 100-2h-4z"
                                        clip-rule="evenodd"></path>
                                </svg>
                                Combination
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Button -->
                <button type="submit"
                    class="w-full py-3 bg-blue-600 text-white font-bold rounded-lg shadow-md hover:bg-blue-700 transition duration-200 transform hover:scale-[1.01] focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50">
                    Calculate Result
                </button>
            </form>
        </div>

        <!-- Custom Modal for Errors -->
        <div id="errorModal"
            class="fixed inset-0 bg-gray-600 bg-opacity-50 z-50 hidden flex justify-center items-center p-4">
            <div class="bg-white rounded-lg p-6 shadow-xl w-full max-w-sm transform transition-all scale-100 ease-out">
                <div class="flex items-center space-x-3">
                    <div class="p-2 rounded-full bg-red-100">
                        <svg class="h-6 w-6 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Input Error</h3>
                </div>
                <div class="mt-2">
                    <p id="errorMessage" class="text-sm text-gray-500">Please select an operation and ensure N is
                        greater than or equal to R.</p>
                </div>
                <div class="mt-4 flex justify-end">
                    <button type="button" onclick="closeModal()"
                        class="inline-flex justify-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
                        Got it
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        const inputN = document.getElementById("inputN");
        const inputR = document.getElementById("inputR");
        const resultSpan = document.getElementById("result");
        const errorModal = document.getElementById("errorModal");
        const errorMessage = document.getElementById("errorMessage");

        function showModal(message) {
            errorMessage.textContent = message;
            errorModal.classList.remove('hidden');
        }

        function closeModal() {
            errorModal.classList.add('hidden');
        }

        function getFactorial(x) {
            let s = 1;
            const num = Number(x);
            if (num < 0) return NaN;
            for (let i = 2; i <= num; i++) {
                s *= i;
            }
            return s;
        }

        function getPermutation(n, r) {
            const factN = getFactorial(n);
            const factNminusR = getFactorial(n - r);
            return factN / factNminusR;
        }

        function getCombination(n, r) {
            const factN = getFactorial(n);
            const factR = getFactorial(r);
            const factNminusR = getFactorial(n - r);
            return factN / (factR * factNminusR);
        }

        function handleSubmit(e) {
            e.preventDefault();

            const op = document.querySelector('input[name="op"]:checked');
            const n = Number(inputN.value);
            const r = Number(inputR.value);

            if (!op) {
                showModal('Please select either Permutation or Combination.');
                return;
            }

            if (n < 0 || r < 0 || isNaN(n) || isNaN(r)) {
                showModal('Please enter valid non-negative numbers for N and R.');
                return;
            }

            if (r > n) {
                showModal('Error: The subset size (R) cannot be greater than the set size (N).');
                return;
            }

            let calculatedResult;
            let resultType;

            if (op.value === "comb") {
                calculatedResult = getCombination(n, r);
                resultType = "Combination";
            } else {
                calculatedResult = getPermutation(n, r);
                resultType = "Permutation";
            }

            resultSpan.textContent = `${resultType} = ${calculatedResult.toLocaleString()}`;
        }

        // Add event listener to close modal when clicking outside
        errorModal.addEventListener('click', (e) => {
            if (e.target === errorModal) {
                closeModal();
            }
        });
    </script>

</body>

</html>